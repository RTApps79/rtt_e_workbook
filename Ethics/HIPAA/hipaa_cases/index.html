<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity: HIPAA Case Study Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Print Styles for Certificate */
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            body * {
                visibility: hidden;
            }
            #printableBadge, #printableBadge * {
                visibility: visible;
            }
            #printableBadge {
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                width: 90vw; /* Adjust for desired size on print */
                height: auto;
                margin: 0;
                padding: 20px;
                box-shadow: none;
                border: 10px solid #10B981 !important; /* Tailwind green-500 */
                color: #000 !important;
                background-color: #D1FAE5 !important; /* Tailwind green-100 */
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            #printableBadge h4, #printableBadge .awardee-name, #printableBadge .badge-logo-print, #printableBadge .completion-date-print {
                color: #047857 !important; /* Tailwind green-700 */
            }
             #printableBadge .awardee-name {
                border-bottom: 1px dashed #059669 !important; /* Tailwind green-600 */
            }
            .nav-links-header, #start-screen-container, #activity-area > .case-study, #activity-area > h2,
            #badge-input-section, #post-activity-navigation, footer, #printBadgeButtonTrigger {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 flex flex-col min-h-screen">

    <header class="bg-white shadow-md sticky top-0 z-50 nav-links-header">
        <div class="container mx-auto px-6 py-3 flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-xl font-bold text-purple-700 mb-2 sm:mb-0">HIPAA Case Study Activity</h1>
            <div class="flex flex-wrap justify-center sm:justify-end space-x-2">
                <a href="/rtt_e_workbook/Ethics/HIPAA/" class="text-xs sm:text-sm bg-purple-500 text-white font-medium py-2 px-3 rounded-lg hover:bg-purple-600 transition-colors duration-300 mb-1 sm:mb-0">
                    &larr; Back to HIPAA Lesson
                </a>
                <a href="/rtt_e_workbook/Ethics/" class="text-xs sm:text-sm bg-purple-500 text-white font-medium py-2 px-3 rounded-lg hover:bg-purple-600 transition-colors duration-300 mb-1 sm:mb-0">
                    &larr; Back to Ethics Module
                </a>
                <a href="../../index.html" class="text-xs sm:text-sm bg-slate-500 text-white font-medium py-2 px-3 rounded-lg hover:bg-slate-600 transition-colors duration-300 mb-1 sm:mb-0">
                    &larr; Back to Main Workbook
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-3xl px-4 sm:px-6 py-8 flex-grow">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-xl">
            <h1 class="text-3xl font-bold text-purple-700 mb-8 text-center border-b-2 border-purple-300 pb-4">Activity: HIPAA Case Study Analysis</h1>

            <div id="start-screen-container" class="bg-purple-50 p-6 rounded-lg shadow-md mb-8 border border-purple-200">
                <h2 class="text-2xl font-semibold text-purple-600 mb-4">Before You Begin...</h2>
                <h3 class="text-xl font-medium text-purple-700 mb-2">Purpose</h3>
                <p class="text-slate-700 mb-4 text-sm">This activity challenges you to apply your knowledge of HIPAA's Privacy, Security, and Breach Notification rules by analyzing complex, realistic scenarios. It aims to strengthen your critical thinking and decision-making skills.</p>
                <h3 class="text-xl font-medium text-purple-700 mb-2">Task</h3>
                <p class="text-slate-700 mb-4 text-sm">Read two detailed case studies relevant to radiation therapy. For each case, reflect and type your answers to the prompt questions. This is an exercise in thoughtful analysis, not auto-graded.</p>
                <h3 class="text-xl font-medium text-purple-700 mb-2">Criteria for Success</h3>
                <p class="text-slate-700 mb-4 text-sm">Successful completion involves thorough, well-reasoned answers that:</p>
                <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm mb-6">
                    <li>Accurately identify potential HIPAA issues.</li>
                    <li>Reference specific HIPAA rules where applicable.</li>
                    <li>Propose ethically and legally sound courses of action.</li>
                </ul>
                <p class="text-slate-700 mb-4 text-sm">You can earn a printable "Certificate of Completion" after engaging with the cases.</p>
                <button id="start-activity-button" onclick="startActivity()" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg text-lg transition-colors duration-300 block mx-auto">Start Case Study Analysis</button>
            </div>

            <div id="activity-area" style="display: none;">
                <div class="case-study bg-white p-5 rounded-lg shadow-lg mb-8 border border-slate-200">
                    <h2 class="text-2xl font-semibold text-purple-600 mb-3">Case Study 1: The 'Helpful' Colleague</h2>
                    <p class="case-summary bg-purple-50 p-3 rounded-md text-sm text-slate-700 mb-4 border border-purple-100">An RTT, Tom, is covering a shift and needs to access patient setup notes. His own EMR login isn't working. His colleague, Sarah, is busy but quickly tells Tom her password so he can log in as her to get the information and keep the schedule moving. Later, Tom uses Sarah's login to quickly check the appointment time for his uncle, who is being treated in another department.</p>
                    
                    <div class="prompt-question-container mb-4">
                        <label for="cs1q1" class="block text-md font-medium text-purple-700 mb-1">1. Identify all potential HIPAA violations in this scenario.</label>
                        <textarea id="cs1q1" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="List violations related to passwords, access, etc."></textarea>
                    </div>
                    <div class="prompt-question-container mb-4">
                        <label for="cs1q2" class="block text-md font-medium text-purple-700 mb-1">2. Which specific HIPAA Rules (Privacy/Security) and Safeguards (Admin, Physical, Tech) are relevant?</label>
                        <textarea id="cs1q2" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="Think about access control, sanctions, audit trails..."></textarea>
                    </div>
                    <div class="prompt-question-container">
                        <label for="cs1q3" class="block text-md font-medium text-purple-700 mb-1">3. What should Tom and Sarah have done differently? What actions should be taken now?</label>
                        <textarea id="cs1q3" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="Describe correct procedure and reporting..."></textarea>
                    </div>
                </div>

                <div class="case-study bg-white p-5 rounded-lg shadow-lg mb-8 border border-slate-200">
                    <h2 class="text-2xl font-semibold text-purple-600 mb-3">Case Study 2: The Lost USB Drive</h2>
                    <p class="case-summary bg-purple-50 p-3 rounded-md text-sm text-slate-700 mb-4 border border-purple-100">An RTT, Lisa, is working on a presentation about a new treatment technique. To work on it at home, she downloads several patient treatment plans (including names, IDs, and plan details) onto a personal, unencrypted USB drive. The next day, she realizes the USB drive is missing. She thinks she might have left it at a coffee shop.</p>

                    <div class="prompt-question-container mb-4">
                        <label for="cs2q1" class="block text-md font-medium text-purple-700 mb-1">1. Does this situation constitute a HIPAA breach? Why or why not?</label>
                        <textarea id="cs2q1" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="Consider the definition of a breach and encryption..."></textarea>
                    </div>
                    <div class="prompt-question-container mb-4">
                        <label for="cs2q2" class="block text-md font-medium text-purple-700 mb-1">2. What are Lisa's immediate responsibilities? What are the facility's responsibilities under the Breach Notification Rule?</label>
                        <textarea id="cs2q2" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="Think about reporting (internal & external)..."></textarea>
                    </div>
                    <div class="prompt-question-container">
                        <label for="cs2q3" class="block text-md font-medium text-purple-700 mb-1">3. What Security Rule safeguards could have prevented this situation?</label>
                        <textarea id="cs2q3" class="w-full p-2 border border-slate-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500" rows="3" placeholder="Think about policies on devices, PHI transport, encryption..."></textarea>
                    </div>
                </div>
                
                <div id="badge-section" class="mt-10 p-6 bg-purple-50 rounded-lg shadow-md text-center border border-purple-200">
                    <h3 class="text-xl font-semibold text-purple-600 mb-4">Activity Completion Certificate</h3>
                    <div id="badge-input-section" class="mb-4">
                        <label for="userNameForBadge" class="block text-sm font-medium text-slate-700 mb-1">Enter Your Name for Certificate:</label>
                        <input type="text" id="userNameForBadge" placeholder="Your Name Here" class="mt-1 block w-full sm:w-auto sm:inline-block max-w-xs px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm">
                        <button onclick="generateBadge()" class="mt-2 sm:mt-0 sm:ml-2 bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors">Generate Certificate</button>
                    </div>
                    <div id="printableBadge" style="display:none;" class="w-full max-w-md h-auto border-8 border-green-500 bg-green-100 mx-auto p-6 sm:p-8 flex flex-col justify-center items-center shadow-lg font-serif text-center rounded-lg">
                        <h4 class="text-green-700 text-2xl sm:text-3xl font-bold mb-2 sm:mb-4">Certificate of Completion</h4>
                        <p class="awardee-name text-green-600 text-xl sm:text-2xl font-semibold my-3 sm:my-5 border-b-2 border-dashed border-green-600 pb-1 sm:pb-2" id="badgeNameDisplay"></p>
                        <p class="reason-text text-slate-700 text-md sm:text-lg my-2 sm:my-3">Has successfully completed the HIPAA Case Study Analysis Activity.</p>
                        <p class="completion-date-print text-slate-600 text-sm my-2 sm:my-3" id="badgeDateDisplay"></p>
                        <p class="badge-logo-print text-green-700 text-sm font-bold mt-3 sm:mt-4">RTApps Learning</p>
                    </div>
                    <button id="printBadgeButtonTrigger" onclick="window.print()" style="display:none;" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors">Print Certificate</button>
                    <div id="print-error-message" class="text-red-500 text-xs mt-2" style="display:none;">Please generate the certificate first by entering your name.</div>
                </div>

                <div id="post-activity-navigation" class="text-center mt-10 pt-6 border-t border-slate-200">
                    <h3 class="text-xl font-semibold text-slate-700 mb-4">What's Next?</h3>
                    <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4">
                        <button onclick= "href="/rtt_e_workbook/Ethics/" class="w-full sm:w-auto bg-slate-500 hover:bg-slate-600 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors">Back to Ethics Menu</button>
                        <button onclick="window.location.reload()" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors">Review Cases Again</button>
                        <button onclick="window.location.href='index.html#lesson-page-10'" class="w-full sm:w-auto bg-purple-500 hover:bg-purple-600 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors">Other HIPAA Activities</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-slate-800 text-slate-300 py-6 mt-auto text-center">
        <div class="container mx-auto px-6">
            <p class="text-sm">&copy; <span id="currentYear"></span> Radiation Therapy E-Workbook. RTApps All Rights Reserved.</p>
            <p class="text-xs mt-1">HIPAA Case Study Activity</p>
        </div>
    </footer>

    <script>
        function startActivity() {
            document.getElementById('start-screen-container').style.display = 'none';
            document.getElementById('activity-area').style.display = 'block';
        }

        function generateBadge() {
            const nameInput = document.getElementById('userNameForBadge');
            const name = nameInput.value.trim();
            const printErrorMessage = document.getElementById('print-error-message');

            if (name === "") {
                nameInput.classList.add('border-red-500'); // Highlight input
                printErrorMessage.textContent = "Please enter your name to generate the certificate.";
                printErrorMessage.style.display = 'block';
                return;
            }
            nameInput.classList.remove('border-red-500');
            printErrorMessage.style.display = 'none';

            // Get and format the current date
            const today = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            // Using undefined for locale will use the browser's default locale for formatting
            const formattedDate = today.toLocaleDateString(undefined, options); 

            document.getElementById('badgeNameDisplay').textContent = name;
            document.getElementById('badgeDateDisplay').textContent = "Completed on: " + formattedDate; // Set the date
            document.getElementById('printableBadge').style.display = 'flex'; // Use flex for centering
            document.getElementById('printBadgeButtonTrigger').style.display = 'inline-block';
        }
        
        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
</body>
</html>
