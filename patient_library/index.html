<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Radiation Therapy Patient EMR Repository</title>
  <link rel="stylesheet" href="style.css">
  <!-- Core Cornerstone libraries for DICOM viewing -->
  <script src="https://unpkg.com/cornerstone-core@2/dist/cornerstone.js"></script>
  <script src="https://unpkg.com/cornerstone-math@0.1.8/dist/cornerstoneMath.js"></script>
  <script src="https://unpkg.com/cornerstone-tools@4/dist/cornerstoneTools.js"></script>
  <script src="https://unpkg.com/dicom-parser@1.8.12/dist/dicomParser.js"></script>
  <script src="https://unpkg.com/cornerstone-wado-image-loader@4/dist/cornerstoneWADOImageLoader.js"></script>
</head>
<body>
  <h1>Patient EMR Repository</h1>
  <div>
    <label for="diagnosisSearch">Search by Diagnosis:</label>
    <input type="text" id="diagnosisSearch" placeholder="e.g., lung, prostate">
    <br>
    <label for="patientSelect"><strong>Select Patient:</strong></label>
    <select id="patientSelect"></select>
  </div>
  <div id="emr-tabs-container">
    <div id="emr-tabs"></div>
    <div id="emr-tab-contents"></div>
    <div id="demographics-section"></div>
  </div>
  <!-- Modal for DICOM Viewer -->
  <div id="emr-modal-overlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;">
    <div style="background:#fff;padding:1em;max-width:90vw;max-height:90vh;overflow:auto;position:relative;">
      <button id="emr-modal-close" style="position:absolute;top:4px;right:4px;font-size:1.5em;">Ã—</button>
      <div id="dicom-viewer" style="width:80vw;height:70vh;"></div>
    </div>
  </div>
  <script src="patients.js"></script>
  <script src="emr.js"></script>
</body>
</html>
