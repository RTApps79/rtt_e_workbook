<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding the Linear Accelerator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Feedback styles consistent with other updated lessons */
        .selected-option { background-color: #e0f2fe; /* Tailwind sky-100 */ border-color: #38bdf8; /* Tailwind sky-400 */ }
        .correct-answer-feedback { background-color: #dcfce7 !important; /* Tailwind green-100 */ border-left: 4px solid #22c55e !important; /* Tailwind green-500 */ }
        .incorrect-answer-feedback { background-color: #fee2e2 !important; /* Tailwind red-100 */ border-left: 4px solid #ef4444 !important; /* Tailwind red-500 */ }
        .correct-indicator::after { content: '✔ Correct'; color: #16a34a; /* Tailwind green-600 */ font-weight: bold; margin-left: 10px; }
        .incorrect-indicator::after { content: '✖ Incorrect'; color: #dc2626; /* Tailwind red-600 */ font-weight: bold; margin-left: 10px; }
        .correct-option-text { font-weight: bold; color: #15803d; /* Tailwind green-700 */ }

        .highlight { /* Tailwind purple theme for highlight */
            background-color: #ede9fe; /* purple-100 */
            color: #5b21b6; /* purple-700 */
            padding: 0.1em 0.3em;
            border-radius: 0.25rem;
            font-weight: 500;
        }
        .note { /* Tailwind slate theme for note */
            font-size: 0.9em; font-style: italic; color: #4b5563; /* slate-600 */
            background-color: #f3f4f6; /* slate-100 */
            padding: 10px; border-left: 3px solid #6b7280; /* slate-500 */
            margin: 15px 0; border-radius: 4px;
        }
         .activity-link-button { /* Green button for activities */
            display: inline-block; background-color: #22c55e; /* green-500 */
            color: white; padding: 12px 25px; text-align: center;
            text-decoration: none; border-radius: 0.375rem; /* rounded-lg */
            font-size: 1.1em; font-weight: 500; /* medium */
            margin-top: 15px; transition: background-color 0.2s;
        }
        .activity-link-button:hover { background-color: #16a34a; /* green-600 */ }

        /* Print Styles */
        @media print {
            body { background-color: #fff; margin: 10px; padding: 0; font-size: 10pt; }
            .main-content-wrapper, .flip-lesson-container { box-shadow: none !important; border: none !important; width: 100%; max-width: 100%; padding: 5px; margin-bottom: 15px;}
            .lesson-navigation-bar, .check-page-answers-button, .nav-links-header, .print-button-container, .activity-link-button { display: none !important; }
            .lesson-page { page-break-inside: avoid; border: 1px solid #eee !important; }
            .interactive-question-block {background: #fff !important; border: 1px solid #ccc !important; }
            h1, h2, h3, h4 { color: #000 !important; border-color: #000 !important; margin-bottom: 10px; padding-bottom: 3px;}
            .explanation-text { display: none !important; } 
            a {text-decoration: none; color: #000 !important;}
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 flex flex-col min-h-screen">

    <header class="bg-white shadow-md sticky top-0 z-50 nav-links-header">
        <div class="container mx-auto px-6 py-3 flex flex-col sm:flex-row justify-between items-center">
            <h1 class="text-xl font-bold text-purple-700 mb-2 sm:mb-0">Understanding the Linac</h1>
            <div class="flex flex-wrap justify-center sm:justify-end space-x-2">
                <a href="index.html" class="text-xs sm:text-sm bg-purple-500 text-white font-medium py-2 px-3 rounded-lg hover:bg-purple-600 transition-colors duration-300 mb-1 sm:mb-0">
                    &larr; Back to Modalities Menu
                </a>
                <a href="../index.html" class="text-xs sm:text-sm bg-slate-500 text-white font-medium py-2 px-3 rounded-lg hover:bg-slate-600 transition-colors duration-300 mb-1 sm:mb-0">
                    &larr; Back to Main Workbook
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-4xl px-4 sm:px-6 py-8 flex-grow main-content-wrapper">
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-xl">
            <h1 class="text-3xl font-bold text-purple-700 mb-6 text-center border-b-2 border-purple-300 pb-4">Understanding the Linear Accelerator: Components & Operations</h1>

            <div class="flip-lesson-container bg-purple-50 p-4 sm:p-6 rounded-lg shadow-md mb-8 border border-purple-200">
                <h2 class="text-2xl font-semibold text-purple-600 mb-4">Interactive Lesson</h2>

                <div id="lesson-page-1" class="lesson-page active bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 1: Introduction - The Linac: Workhorse of RT</h3>
                    <div class="mb-4 p-3 bg-purple-100 rounded-md border border-purple-200">
                        <h4 class="text-lg font-medium text-purple-600 mb-1">Purpose: Why This Matters</h4>
                        <p class="text-sm text-slate-600">This lesson provides a detailed understanding of the linear accelerator (Linac), its primary components, their functions, and the Radiation Therapist's (RTT's) crucial role in its safe operation and daily quality assurance (QA).</p>
                    </div>
                    <div class="mb-4 p-3 bg-purple-100 rounded-md border border-purple-200">
                        <h4 class="text-lg font-medium text-purple-600 mb-1">Task: What You Will Do</h4>
                        <p class="text-sm text-slate-600">You will learn about the Linac's overall structure, how the radiation beam is produced and shaped, key safety features, and the operational checks RTTs perform daily.</p>
                    </div>
                    <div class="p-3 bg-purple-100 rounded-md border border-purple-200">
                        <h4 class="text-lg font-medium text-purple-600 mb-1">Criteria for Success</h4>
                        <p class="text-sm text-slate-600">By the end of this lesson, you should be able to identify major Linac components, describe their purpose, explain basic emergency procedures for Linac operation, and understand the RTT's responsibilities for daily Linac QA.</p>
                    </div>
                    <p class="mt-4 text-slate-700">The linear accelerator is the primary device used to deliver external beam radiation therapy (EBRT), precisely targeting tumors while sparing healthy tissue.</p>
                </div>

                <div id="lesson-page-2" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 2: Linac Systems Overview & Major Sections</h3>
                    <p class="text-slate-700">A medical linear accelerator is a complex system with several major sections working in concert.</p>
                    <img src="https://i.ibb.co/XtcC7N1/linac-overview-diagram.png" alt="Simplified Linac Block Diagram" class="mx-auto my-4 rounded-md shadow-md max-w-full h-auto" onerror="this.alt='Simplified diagram showing Drive Stand, Gantry, Couch, Console, and Modulator Cabinet as major Linac sections.'; this.style.display='block'; this.style.textAlign='center'; this.innerHTML=this.alt;">
                    <p class="text-xs text-center text-slate-500 mb-4">Fig 1: Major Sections of a Linear Accelerator (Conceptual)</p>

                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li><strong>Drive Stand:</strong> Typically fixed, contains components that generate and deliver microwave power to the gantry.</li>
                        <li><strong>Gantry:</strong> The large, rotating structure that houses the accelerator guide and treatment head; it directs the radiation beam towards the patient.</li>
                        <li><strong>Treatment Couch (Patient Support Assembly - PSA):</strong> Supports the patient and allows for precise positioning in multiple axes.</li>
                        <li><strong>Control Console:</strong> Located outside the treatment room, used by RTTs to set up, monitor, and deliver treatments.</li>
                        <li><strong>Modulator Cabinet:</strong> Contains components that distribute and monitor electrical power to the Linac, including the pulsed power supply for the microwave generator.</li>
                    </ul>
                    <p class="note text-sm">Objective Link: Knowing the "name of the treatment unit, beam characteristics including modality and energy" relates to understanding this system[cite: 1314].</p>
                </div>
                
                <div id="lesson-page-3" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 3: The Drive Stand - Powering the Beam</h3>
                    <p class="text-slate-700">The drive stand is a crucial section, often secured to the floor, containing the primary components for generating the high-power microwaves needed to accelerate electrons.</p>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Key Components in the Drive Stand:</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm mb-4">
                        <li><strong>Klystron (or Magnetron):</strong> This is the microwave power source. A klystron is a linear-beam vacuum tube that amplifies microwaves, while a magnetron generates them. Most modern high-energy Linacs use klystrons.</li>
                        <li><strong>Waveguide:</strong> A system of hollow pipes that transports the high-power microwaves from the klystron/magnetron to the accelerator structure located in the gantry.</li>
                        <li><strong>Circulator:</strong> A device within the waveguide system that directs the RF energy flow and prevents microwaves from being reflected back into the klystron, which could damage it.</li>
                        <li><strong>Water Cooling System:</strong> Essential for dissipating the large amounts of heat generated by components like the accelerator structure, target, and klystron.</li>
                    </ul>
                     <div class="interactive-question-block mt-6 bg-purple-50 p-3 rounded-md border border-purple-200" id="q_page3_1">
                        <p class="question-text font-semibold text-slate-700 mb-2">Quick Check: Which component in the drive stand is primarily responsible for generating or amplifying the microwave power used to accelerate electrons?</p>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page3_1_ans" value="A" class="mr-2 accent-purple-600"> Water Cooling System</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page3_1_ans" value="B" class="mr-2 accent-purple-600"> Klystron or Magnetron</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page3_1_ans" value="C" class="mr-2 accent-purple-600"> Circulator</label>
                        <div class="explanation-text text-sm text-slate-600 mt-2 p-2 bg-purple-50 rounded" style="display:none;">Correct! B. The Klystron (for higher energies) or Magnetron (often for lower energies) generates the high-frequency microwave power.</div>
                    </div>
                    <button class="check-page-answers-button mt-3 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm" onclick="checkPageAnswer('q_page3_1', 'B')">Check Answer</button>
                </div>

                <div id="lesson-page-4" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 4: The Gantry - Directing the Beam</h3>
                    <p class="text-slate-700">The gantry is the rotating part of the Linac that directs the radiation beam towards the patient.</p>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Key Components in the Gantry:</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li><strong>Electron Gun:</strong> Injects electrons into the accelerator structure.</li>
                        <li><strong>Accelerator Structure (Waveguide):</strong> A series of microwave cavities where electrons are accelerated to near the speed of light.</li>
                        <li><strong>Bending Magnet:</strong> Bends the electron beam (typically 90 or 270 degrees) to direct it towards the patient (or target for X-ray production).</li>
                        <li><strong>Treatment Head:</strong> Contains components to shape, modify, and monitor the beam (detailed on next page).</li>
                    </ul>
                    <p class="note text-sm">The <span class="highlight">isocenter</span> is the fixed point in space around which the gantry, collimator, and couch rotate. It is typically 100 cm from the radiation source[cite: 1316].</p>
                </div>

                <div id="lesson-page-5" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 5: The Treatment Head - Shaping & Monitoring (Photons)</h3>
                     <p class="text-slate-700">The treatment head modifies the beam after it exits the accelerator structure. For photon therapy:</p>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li><strong>X-ray Target:</strong> High-energy electrons strike this heavy metal target (e.g., tungsten) to produce X-rays via Bremsstrahlung.</li>
                        <li><strong>Primary Collimator:</strong> Shapes the beam after the target.</li>
                        <li><strong>Beam-Flattening Filter:</strong> A conical metal filter that makes the X-ray beam intensity more uniform across the field.</li>
                        <li><strong>Ion Chambers:</strong> Monitor the beam's dose rate, integrated dose, and flatness/symmetry.</li>
                        <li><strong>Secondary Collimators (Jaws):</strong> Movable heavy metal jaws (X and Y pairs) that define the rectangular field size. Can be symmetric or asymmetric.</li>
                        <li><strong>Multi-Leaf Collimators (MLCs):</strong> Many individually controlled leaves that conform the beam shape to the target.</li>
                        <li><strong>Accessory Tray/Mount:</strong> Holds wedges, custom blocks, or other beam modifiers[cite: 1318].</li>
                    </ul>
                </div>
                
                <div id="lesson-page-6" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 6: The Treatment Head - Electron Therapy</h3>
                    <p class="text-slate-700">For electron therapy, the treatment head configuration changes:</p>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li>The X-ray target and flattening filter are moved out of the beam path.</li>
                        <li><strong>Scattering Foils:</strong> One or more thin metallic foils are introduced to spread the narrow "pencil beam" of electrons into a broad, clinically useful beam.</li>
                        <li><strong>Electron Applicators (Cones):</strong> These attach to the treatment head and extend close to the patient's surface. They provide further collimation of the electron beam and define the final field size and shape at the skin[cite: 1318]. Standard sizes vary (e.g., 6x6 cm, 10x10 cm, etc.).</li>
                        <li>Ion chambers still monitor the electron beam.</li>
                    </ul>
                     <div class="interactive-question-block mt-6 bg-purple-50 p-3 rounded-md border border-purple-200" id="q_page6_1">
                        <p class="question-text font-semibold text-slate-700 mb-2">Quick Check: In electron therapy, what is primarily used to spread the initial narrow electron beam?</p>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page6_1_ans" value="A" class="mr-2 accent-purple-600"> Flattening Filter</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page6_1_ans" value="B" class="mr-2 accent-purple-600"> X-ray Target</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page6_1_ans" value="C" class="mr-2 accent-purple-600"> Scattering Foils</label>
                        <div class="explanation-text text-sm text-slate-600 mt-2 p-2 bg-purple-50 rounded" style="display:none;">Correct! C. Scattering foils are used to broaden the pencil beam of electrons.</div>
                    </div>
                    <button class="check-page-answers-button mt-3 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm" onclick="checkPageAnswer('q_page6_1', 'C')">Check Answer</button>
                </div>

                <div id="lesson-page-7" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 7: Patient Support Assembly (PSA) & Control Console</h3>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Treatment Couch (PSA):</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li>Supports the patient accurately and reproducibly. Often made of carbon fiber to minimize beam attenuation.</li>
                        <li>Capable of multiple movements: longitudinal (in/out), lateral (left/right), vertical (up/down), rotation, and sometimes pitch and roll.</li>
                        <li><span class="highlight">Pendant controls</span> allow RTTs to move the couch from within the room[cite: 1317].</li>
                        <li>Indexed for precise attachment of immobilization devices.</li>
                    </ul>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Control Console:</h4>
                     <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li>Located outside the treatment room, RTTs operate the Linac from here.</li>
                        <li>Displays and allows setting of treatment parameters (MUs, energy, gantry/collimator angles, etc.)[cite: 1319].</li>
                        <li>Includes systems for <span class="highlight">patient monitoring</span> (audio intercom and video cameras)[cite: 1320].</li>
                        <li>Features a complex <span class="highlight">interlock system</span> that prevents beam delivery if unsafe conditions are detected.</li>
                    </ul>
                </div>
                
                <div id="lesson-page-8" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 8: Lasers & Field Light - Guiding the Treatment</h3>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Laser System: [cite: 1318]</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li>Essential for aligning the patient with the Linac's isocenter.</li>
                        <li>Typically includes:
                            <ul>
                                <li>Two <span class="highlight">lateral (side) lasers</span>.</li>
                                <li>One <span class="highlight">overhead (ceiling-mounted) laser</span>.</li>
                                <li>Sometimes a <span class="highlight">sagittal laser</span> (projected along the couch or from the gantry).</li>
                            </ul>
                        </li>
                        <li>These lasers define the three cardinal planes (axial/transverse, sagittal, coronal) intersecting at the isocenter.</li>
                        <li>Their accuracy is checked daily as part of QA.</li>
                    </ul>
                     <h4 class="text-lg font-medium text-purple-600 my-2">Field Light:</h4>
                     <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li>A light source within the treatment head projects a beam of light that coincides with the shape and size of the radiation field.</li>
                        <li>Used by RTTs to visually align the radiation field with the patient's skin marks or setup landmarks.</li>
                        <li>The congruence between the light field and the radiation field is a critical QA check.</li>
                    </ul>
                </div>

                <div id="lesson-page-9" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 9: Daily Warm-Up & Quality Assurance (QA) by RTTs</h3>
                    <p class="text-slate-700">Before treating any patients each day, RTTs perform essential warm-up and QA procedures to ensure the Linac is operating safely and accurately.</p>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Key Daily RTT QA Tasks:</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm">
                        <li><strong>Machine Warm-up:</strong> Following the manufacturer's recommended procedures to bring the machine to stable operating conditions[cite: 1320].</li>
                        <li><strong>Safety Interlock Checks:</strong> Verifying that door interlocks, emergency stops, audio/visual monitors, and beam-on indicators are functional[cite: 1320].</li>
                        <li><strong>Laser Alignment:</strong> Checking that the room lasers accurately define the machine isocenter[cite: 1321].</li>
                        <li><strong>Distance Indicator (ODI/Rangefinder):</strong> Verifying its accuracy[cite: 1321].</li>
                        <li><strong>Light Field vs. Radiation Field Congruence:</strong> Ensuring the projected light field accurately represents the radiation beam (often checked with imaging)[cite: 1321].</li>
                        <li><strong>Output Constancy Checks:</strong> Verifying that the machine is delivering the correct radiation dose (often a simplified check by RTTs, with more detailed checks by physics).</li>
                    </ul>
                    <p class="note">All QA procedures and their results must be meticulously documented according to institutional policy.</p>
                </div>

                <div id="lesson-page-10" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 10: Emergency Procedures & Safety Interlocks</h3>
                    <p class="text-slate-700">RTTs must be proficient in handling emergency situations.</p>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Emergency Stop Buttons:</h4>
                     <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm mb-3">
                        <li>Located on the Linac gantry, couch pendant, and control console. Pressing these will immediately terminate radiation and machine movement.</li>
                    </ul>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Responding to Events[cite: 1315]:</h4>
                     <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm mb-3">
                        <li><strong>Equipment Malfunction (e.g., beam won't turn off, gantry stuck):</strong> Hit emergency stop, safely assist patient, notify physics/engineering.</li>
                        <li><strong>Power Failures:</strong> Follow facility protocols for patient safety and machine shutdown. Many Linacs have battery backup for essential couch movements.</li>
                        <li><strong>Fire:</strong> Follow RACE (Rescue, Alarm, Contain, Extinguish/Evacuate).</li>
                        <li><strong>Patient Movement or Needs Assistance:</strong> Stop the beam (if on), use intercom to communicate, enter room if safe, address patient needs.</li>
                    </ul>
                    <p class="text-slate-700 text-sm">Understanding and practicing emergency shutdown and re-start procedures is critical[cite: 1322]. Safety interlocks (door, collision, etc.) are designed to prevent unsafe conditions.</p>
                     <div class="interactive-question-block mt-6 bg-purple-50 p-3 rounded-md border border-purple-200" id="q_page10_1">
                        <p class="question-text font-semibold text-slate-700 mb-2">Quick Check: If the Linac gantry begins to move unexpectedly towards the patient, what is the RTT's immediate action?</p>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page10_1_ans" value="A" class="mr-2 accent-purple-600"> Call the physicist.</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page10_1_ans" value="B" class="mr-2 accent-purple-600"> Press the nearest Emergency Stop button.</label>
                        <label class="block mb-1 p-2 rounded hover:bg-purple-100 cursor-pointer"><input type="radio" name="q_page10_1_ans" value="C" class="mr-2 accent-purple-600"> Try to manually stop the gantry.</label>
                        <div class="explanation-text text-sm text-slate-600 mt-2 p-2 bg-purple-50 rounded" style="display:none;">Correct! B. Pressing an Emergency Stop is the immediate action to halt machine movement and beam in an unsafe situation.</div>
                    </div>
                    <button class="check-page-answers-button mt-3 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm" onclick="checkPageAnswer('q_page10_1', 'B')">Check Answer</button>
                </div>
                
                <div id="lesson-page-11" class="lesson-page bg-white p-4 sm:p-5 rounded-md border border-purple-200 min-h-[480px]">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">Page 11: Summary & Activity Link</h3>
                    <p class="text-slate-700">This lesson provided an overview of the Linear Accelerator, covering its major systems, components, and the RTT's role in its operation, daily QA, and emergency preparedness.</p>
                    <h4 class="text-lg font-medium text-purple-600 my-2">Key Takeaways:</h4>
                    <ul class="list-disc list-inside text-slate-700 space-y-1 text-sm mb-4">
                        <li>Linacs are complex devices requiring knowledgeable and skilled operators.</li>
                        <li>Understanding components from the drive stand to the treatment head is essential for RTTs.</li>
                        <li>Daily QA procedures ensure the Linac is functioning correctly and safely.</li>
                        <li>RTTs must be proficient in emergency procedures.</li>
                    </ul>
                    <p class="text-slate-700">A thorough understanding of the Linac is fundamental to delivering safe and accurate radiation therapy.</p>
                    <h4 class="text-lg font-medium text-purple-600 mt-6 mb-2">Test Your Knowledge:</h4>
                    <p class="text-slate-700">Proceed to the "Linac Operations Lab" activity to apply what you've learned about components and safety.</p>
                     <div class="mt-6 text-center">
                        <a href="linac_operations_lab_activity.html" class="activity-link-button">
                            Go to Linac Operations Lab
                        </a>
                    </div>
                </div>

                <div class="lesson-navigation-bar text-center mt-6">
                    <button id="prevLessonPage" onclick="changeLessonPage(-1)" disabled class="bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors disabled:bg-slate-300 text-sm">Previous Page</button>
                    <button id="backToMenuButton" onclick="goBackToModalitiesMenu()" style="display:none;" class="bg-slate-500 text-white py-2 px-4 rounded-lg hover:bg-slate-600 transition-colors text-sm">Back to Modalities Menu</button>
                    <span class="page-indicator mx-2 sm:mx-4 text-sm text-slate-600" id="lessonPageIndicator">Page 1 of 11</span>
                    <button id="nextLessonPage" onclick="changeLessonPage(1)" class="bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors text-sm">Next Page</button>
                </div>
            </div>

            <div class="print-button-container text-center mt-8">
                <button onclick="window.print()" class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-6 rounded-lg text-sm transition-colors">Print Lesson</button>
            </div>
        </div>
    </main>

    <footer class="bg-slate-800 text-slate-300 py-6 mt-auto text-center">
        <div class="container mx-auto px-6">
            <p class="text-sm">&copy; <span id="currentYear"></span> RTApps. All Rights Reserved.</p>
            <p class="text-xs mt-1">Understanding the Linear Accelerator Lesson</p>
        </div>
    </footer>

    <script>
        let currentLessonPage = 1;
        const totalLessonPages = 11; // Updated
        const lessonPages = document.querySelectorAll('.lesson-page');
        const prevLessonButton = document.getElementById('prevLessonPage');
        const nextLessonButton = document.getElementById('nextLessonPage');
        const backToMenuButton = document.getElementById('backToMenuButton');
        const lessonPageIndicator = document.getElementById('lessonPageIndicator');
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        const lessonCorrectAnswers = {
            'q_page3_1': 'B',
            'q_page6_1': 'C',
            'q_page10_1': 'B'
            // Add more as needed
        };

        function displayLessonPage() {
            lessonPages.forEach((page, index) => {
                page.style.display = (index === currentLessonPage - 1) ? 'block' : 'none';
            });
            prevLessonButton.disabled = currentLessonPage === 1;
            if (currentLessonPage === totalLessonPages) {
                nextLessonButton.style.display = 'none';
                if (backToMenuButton) backToMenuButton.style.display = 'inline-block';
            } else {
                nextLessonButton.style.display = 'inline-block';
                if (backToMenuButton) backToMenuButton.style.display = 'none';
            }
            lessonPageIndicator.textContent = `Page ${currentLessonPage} of ${totalLessonPages}`;
        }

        function changeLessonPage(direction) {
            currentLessonPage += direction;
            displayLessonPage();
        }

        function goBackToModalitiesMenu() {
            // Assumes Modalities menu is index.html in the current folder
            window.location.href = 'index.html'; 
        }

        function checkPageAnswer(questionBlockId, correctAnswerValue) {
            const questionBlock = document.getElementById(questionBlockId);
            if (!questionBlock) return;
            const selectedRadio = questionBlock.querySelector(`input[name="${questionBlockId}_ans"]:checked`);
            const explanationDiv = questionBlock.querySelector('.explanation-text');
            
            questionBlock.classList.remove('correct-answer-feedback', 'incorrect-answer-feedback');
            questionBlock.querySelectorAll('label').forEach(label => {
                label.classList.remove('font-semibold', 'text-green-700', 'text-red-700');
                const indicator = label.querySelector('.correct-indicator, .incorrect-indicator');
                if(indicator) indicator.remove();
            });
            if (explanationDiv) explanationDiv.style.display = 'none';

            if (selectedRadio) {
                const userAnswer = selectedRadio.value;
                const userSelectedLabel = selectedRadio.parentElement;
                if (userAnswer === correctAnswerValue) {
                    questionBlock.classList.add('correct-answer-feedback');
                    userSelectedLabel.classList.add('font-semibold', 'text-green-700');
                    const indicator = document.createElement('span');
                    indicator.className = 'correct-indicator';
                    userSelectedLabel.appendChild(indicator);
                } else {
                    questionBlock.classList.add('incorrect-answer-feedback');
                    userSelectedLabel.classList.add('font-semibold', 'text-red-700');
                    const indicator = document.createElement('span');
                    indicator.className = 'incorrect-indicator';
                    userSelectedLabel.appendChild(indicator);
                    const correctRadio = questionBlock.querySelector(`input[name="${questionBlockId}_ans"][value="${correctAnswerValue}"]`);
                    if (correctRadio && correctRadio.parentElement) {
                        correctRadio.parentElement.classList.add('font-semibold', 'text-green-700');
                        const correctIndicator = document.createElement('span');
                        correctIndicator.className = 'correct-indicator';
                        correctRadio.parentElement.appendChild(correctIndicator);
                    }
                }
            } else { 
                questionBlock.classList.add('incorrect-answer-feedback');
                const correctRadio = questionBlock.querySelector(`input[name="${questionBlockId}_ans"][value="${correctAnswerValue}"]`);
                if (correctRadio && correctRadio.parentElement) {
                    correctRadio.parentElement.classList.add('font-semibold', 'text-green-700');
                     const correctIndicator = document.createElement('span');
                     correctIndicator.className = 'correct-indicator';
                     correctRadio.parentElement.appendChild(correctIndicator);
                }
            }
            if (explanationDiv) explanationDiv.style.display = 'block';
        }
        
        displayLessonPage();
    </script>
</body>
</html>
